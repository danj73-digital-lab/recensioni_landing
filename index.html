<!DOCTYPE html>
<html lang="it">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Recensioni</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <header>
    <div class="logo">Logo Azienda</div>
    <h1>Recensioni dei nostri clienti</h1>
  </header>

  <section class="overview">
    <div class="average-rating">
      <div class="score">
        <span class="value">4.5</span>
        <span class="stars">★★★★☆</span>
      </div>
      <div class="total-reviews">Basato su <strong>150</strong> recensioni</div>
    </div>

    <div class="rating-breakdown">
      <div class="bar-row"><span>5 stelle</span><div class="bar"><div style="width: 60%"></div></div></div>
      <div class="bar-row"><span>4 stelle</span><div class="bar"><div style="width: 25%"></div></div></div>
      <div class="bar-row"><span>3 stelle</span><div class="bar"><div style="width: 10%"></div></div></div>
      <div class="bar-row"><span>2 stelle</span><div class="bar"><div style="width: 3%"></div></div></div>
      <div class="bar-row"><span>1 stella</span><div class="bar"><div style="width: 2%"></div></div></div>
    </div>
  </section>

  <section class="filters">
    <label>Filtra per stelle:
      <select id="starFilter">
        <option value="">Tutte</option>
        <option value="5">5 stelle</option>
        <option value="4">4 stelle</option>
        <option value="3">3 stelle</option>
        <option value="2">2 stelle</option>
        <option value="1">1 stella</option>
      </select>
    </label>
    <label>Filtra per data:
      <select id="dateFilter">
        <option value="">Tutte</option>
        <option value="recenti">Più recenti</option>
        <option value="vecchie">Più vecchie</option>
      </select>
    </label>
    <label>Filtra per categoria:
      <select id="categoryFilter">
        <option value="">Tutte</option>
        <option value="servizio">Servizio</option>
        <option value="struttura">Struttura</option>
      </select>
    </label>
  </section>

  <section class="reviews" id="reviewsContainer">
    <article class="review" data-stars="5" data-date="2024-04-01" data-category="servizio">
      <h3>Maria R. - 01/04/2024</h3>
      <div class="stars">★★★★★</div>
      <p>Servizio impeccabile, rapido e preciso. Tornerò sicuramente!</p>
    </article>
    <article class="review" data-stars="4" data-date="2024-03-20" data-category="struttura">
      <h3>Luca B. - 20/03/2024</h3>
      <div class="stars">★★★★☆</div>
      <p>Struttura ben organizzata ma con qualche dettaglio da migliorare.</p>
    </article>
    <article class="review" data-stars="3" data-date="2024-02-10" data-category="servizio">
      <h3>Giulia S. - 10/02/2024</h3>
      <div class="stars">★★★☆☆</div>
      <p>Esperienza nella media, mi aspettavo qualcosa di più.</p>
    </article>
  </section>

  <button id="loadMore">Vedi tutte le recensioni</button>

  <script>
    const reviews = document.querySelectorAll('.review');
    const starFilter = document.getElementById('starFilter');
    const dateFilter = document.getElementById('dateFilter');
    const categoryFilter = document.getElementById('categoryFilter');

    function filterReviews() {
      const starValue = starFilter.value;
      const dateValue = dateFilter.value;
      const categoryValue = categoryFilter.value;

      let sorted = Array.from(reviews);

      sorted.forEach(review => {
        review.style.display = 'block';

        if (starValue && review.dataset.stars !== starValue) {
          review.style.display = 'none';
        }

        if (categoryValue && review.dataset.category !== categoryValue) {
          review.style.display = 'none';
        }
      });

      if (dateValue === 'recenti') {
        sorted.sort((a, b) => new Date(b.dataset.date) - new Date(a.dataset.date));
      } else if (dateValue === 'vecchie') {
        sorted.sort((a, b) => new Date(a.dataset.date) - new Date(b.dataset.date));
      }

      const container = document.getElementById('reviewsContainer');
      container.innerHTML = '';
      sorted.forEach(r => container.appendChild(r));
    }

    starFilter.addEventListener('change', filterReviews);
    dateFilter.addEventListener('change', filterReviews);
    categoryFilter.addEventListener('change', filterReviews);
  </script>
</body>

</html>
